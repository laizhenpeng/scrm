
# 利用腾讯云完成SCRM微信小程序
## 1 项目背景
### 1.1 SCRM介绍
* 社交化客户管理小程序
* 侧重于利用微信的社交功能来进行客户关系的建立和维护；侧重于利用微信的支付功能
* 微信的用户量大，营销渠道完善，支付方式便利；微信小程序的开发成本较低
### 1.2 版本控制
github，仓库地址：https://github.com/laizhenpeng/scrm
## 2 需求实现
### 2.1 主要页面
* 登录、首页、关系、数据、我的
* 查看个人信息、编辑个人信息、查看客户信息、聊天
### 2.2 云端数据库
* users：获取到的用户基本信息
* userinfo：用户在小程序中完善的信息
* records：用户的关系/行为，包括访客(vis)、客户(csr)和消息(msg)
* indexData：统计每日的数据
* data：统计小程序显示的数据
### 2.3 功能
* 用户可以通过微信授权登录小程序
* 用户可以查看/编辑自己的个人资料
* 用户可以使用扫一扫功能或分享功能
* 用户可以查看消息/客户列表
* 用户可以查看客户资料并发起聊天或拨打手机
* 用户可以通过聊天进行消息的接受和发送
* 用户可以查看小程序的数据和图表分析结果
## 3 重难点与亮点
### 3.1 重难点
* 微信小程序只有Button有open-type属性，因此在分享功能下面隐藏了一个Button，设置open-type=“share”，实现分享功能
* wx.getUserInfo是网络请求，可能会在onLoad之后返回，因此加入callback回调函数
* 云数据库聚合(aggregate)API的使用
* 消息列表与客户列表的排序问题
### 3.2 亮点
* 使用Echarts组件将数据可视化
* 使用Github的Actions配置项目持续集成
* 使用MTA进行数据分析
* 使用Fundebug监控线上警报
* 项目引入Eslint
* 良好的小程序风格与完善的提示功能
* 聊天页面自动定位至底部
* web-view显示扫描二维码结果
## 4 总结与收获
* 独立完成了小程序框架和页面的设计与实现，并实现了小程序的主要功能
* 掌握了微信小程序云开发的能力，掌握了云函数、云数据库的使用
* 学习了Echarts、Github Actions、MTA、Fundebug等组件与工具的使用
* 通过小程序开发实战进一步巩固了html、css和js基础，提升了前端开发的能力